<ion-header>
  <ion-navbar>
    <ion-grid>
      <ion-row class="ptop-10">
        <ion-col class="text-left" col-10>
          <ion-avatar class="header-user-profile inline middle" item-start>
            <img [src]="chatData?.avatar_url">
          </ion-avatar>
          <ion-title class="inline middle">
            {{ chatData?.name }}
            <small class="chat-bubble-header-username fweight-100 blank">@{{ chatData?.username }}</small>
          </ion-title>
        </ion-col>
        <ion-col class="text-right" col-2>
          <ion-icon name="md-more" class="header-icon-config blank" (tap)="showBubbleOptions()"></ion-icon>
        </ion-col>
      </ion-row>

      <small class="chat-bubble-header-data fweight-100 blank">
        visualizado Ã s {{ chatData?.last_view | date:'hh:mm' }}
      </small>

    </ion-grid>
  </ion-navbar>
</ion-header>

<ion-content class="bubble__container" padding>

  <div *ngFor="let message of chatData.messages; let i = index">

    <p class="chat-bubble-bubble inline" [ngClass]="{'myself': message?.user_id == currentUser?.user_id,
                                                               'otheruser': message?.user_id !== currentUser?.user_id}" (press)="messageTapped($event, message)">
      {{ message?.text }}&nbsp;&nbsp;<span>{{ message?.created_at | date:'hh:mm' }}</span>
      &nbsp;&nbsp;<ion-icon name="md-checkmark-circle" class="light-gray middle" [hidden]="!message?.selected"></ion-icon>
    </p>

    &nbsp;
    <span [hidden]="message?.user_id == currentUser?.user_id" (tap)="likeToggle(message)">
      <ion-icon class="chat-bubble-bubble-like red" name="ios-heart" [hidden]="!message?.liked"></ion-icon>
      <ion-icon class="chat-bubble-bubble-like" name="ios-heart-outline" [hidden]="message?.liked"></ion-icon>
    </span>

    <div [hidden]="!(message?.user_id !== currentUser?.user_id && i == (chatData?.messages_count - 1) && message?.read)">
      <small class="chat-bubble-bubble-visualized block">
        <ion-icon class="middle" name="ios-eye-outline"></ion-icon>&nbsp;visto
      </small>
    </div>

    <div class="fix-float"></div>
  </div>

  <!-- <footer class="chat-bubble-bubble-footer">
    <ion-grid>
      <ion-row>
        <ion-col col-10>
          <ion-textarea class="textarea" placeholder="Diga algo..."></ion-textarea>
        </ion-col>
        <ion-col col-2>
          <button class="send-message btn-primary" ion-button icon-only>
            <ion-icon name="md-send"></ion-icon>
          </button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </footer> -->
</ion-content>

<ion-footer class="bubble-footer">
  <ion-toolbar>
      <ion-grid>
        <ion-row>
          <ion-col col-10 class="bg-blank radius-10">
            <ion-textarea class="bubble-textbox" placeholder="Diga algo..."></ion-textarea>
          </ion-col>
          <ion-col col-2>
            <button ion-button icon-only class="send-message btn-primary">
              <ion-icon name="md-send"></ion-icon>
            </button>
          </ion-col>
        </ion-row>
      </ion-grid>
  </ion-toolbar>
</ion-footer>
